dev.copy(pdf,'figs/funnel_re_all.pdf')
dev.off()
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(metafor)
# Data import
load(file="data/meta_results.RData")
################################################################################
# Funnel Plot Analysis
################################################################################
# Examine number of published articles by field or survey
# with  group
sum = meta %>%
group_by(published, type) %>%
summarise (number = n())
# Funnel plot for all experiments
re_funnel = funnel(re,
back = "grey95", col = "steelblue2",
digits = c(1,1))
dev.copy(pdf,'figs/funnel_re_all.pdf')
dev.off()
# Funnel plot for field experiments
funnel(re_field,
back = "grey95", col = "steelblue2",
digits = c(1,1))
dev.copy(pdf,'figs/funnel_re_field.pdf')
dev.off()
# Funnel plot for survey experiments
funnel(fe_survey,
back = "grey95", col = "steelblue2",
digits = c(1,1))
funnel(re_survey,
back = "grey95", col = "steelblue2",
digits = c(1,1))
dev.copy(pdf,'figs/funnel_re_survey.pdf')
dev.off()
# Funnel plot with moderator for field experiments
me_mod  = funnel(me_mod,
back = "grey95", col = "steelblue2",
digits = c(1,1))
ggsave("figs/funnel_all_mod", height = 4, width = 6)
dev.copy(pdf,'figs/funnel_all_mod.pdf')
dev.off()
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(metafor)
# Data import
load(file="data/meta_results.RData")
################################################################################
# Funnel Plot Analysis
################################################################################
# Examine number of published articles by field or survey
# with  group
sum = meta %>%
group_by(published, type) %>%
summarise (number = n())
# Funnel plot for all experiments
re_funnel = funnel(re,
back = "grey95", col = "steelblue2",
digits = c(1,1))
dev.copy(pdf,'figs/funnel_re_all.pdf')
dev.off()
# Funnel plot for field experiments
funnel(re_field,
back = "grey95", col = "steelblue2",
digits = c(1,1))
dev.copy(pdf,'figs/funnel_re_field.pdf')
dev.off()
# Funnel plot for survey experiments
funnel(fe_survey,
back = "grey95", col = "steelblue2",
digits = c(1,1))
funnel(re_survey,
back = "grey95", col = "steelblue2",
digits = c(1,1))
dev.copy(pdf,'figs/funnel_re_survey.pdf')
dev.off()
# Funnel plot with moderator for field experiments
me_mod  = funnel(me_mod,
back = "grey95", col = "steelblue2",
digits = c(1,1))
dev.copy(pdf,'figs/funnel_all_mod.pdf')
dev.off()
regtest_re = regtest(re, model = "lm", predictor = "sei")
regtest_re
regtest_re = regtest(re, model = "lm", predictor = "sei")
regtest_mod = regtest(me_mod, model = "lm", predictor = "sei")
regtest_re_survey = regtest(re_survey, model = "lm", predictor = "sei")
regtest_re_field = regtest(re_field, model = "lm", predictor = "sei")
regtest_mod = regtest(me_mod, model = "lm", predictor = "sei")
regtest_mod = regtest(me_mod, model = "lm", predictor = "sei")
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(metafor)
# Data import
load(file="data/meta_results.RData")
################################################################################
# Funnel Plot Analysis
################################################################################
# Examine number of published articles by field or survey
# with  group
sum = meta %>%
group_by(published, type) %>%
summarise (number = n())
# Funnel plot for all experiments
re_funnel = funnel(re,
back = "grey95", col = "steelblue2",
digits = c(1,1))
dev.copy(pdf,'figs/funnel_re_all.pdf')
dev.off()
# Funnel plot for field experiments
funnel(re_field,
back = "grey95", col = "steelblue2",
digits = c(1,1))
dev.copy(pdf,'figs/funnel_re_field.pdf')
dev.off()
# Funnel plot for survey experiments
funnel(fe_survey,
back = "grey95", col = "steelblue2",
digits = c(1,1))
funnel(re_survey,
back = "grey95", col = "steelblue2",
digits = c(1,1))
dev.copy(pdf,'figs/funnel_re_survey.pdf')
dev.off()
# Funnel plot with moderator for field experiments
funnel(me_mod,
back = "grey95", col = "steelblue2",
digits = c(1,1))
dev.copy(pdf,'figs/funnel_all_mod.pdf')
dev.off()
# Regression test for funnel plot asymmetry
regtest_re = regtest(re, model = "lm", predictor = "sei")
regtest_mod = regtest(me_mod, model = "lm", predictor = "sei")
regtest_re_survey = regtest(re_survey, model = "lm", predictor = "sei")
regtest_re_field = regtest(re_field, model = "lm", predictor = "sei")
regtest_mod
regtest_re_survey
regtest_re_field
library(stargazer)
stargazer(regtest_re)
summary(regtest_re)
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(metafor)
library(stargazer)
# Data import
load(file="data/meta_results.RData")
################################################################################
# Funnel Plot Analysis
################################################################################
# Examine number of published articles by field or survey
# with  group
sum = meta %>%
group_by(published, type) %>%
summarise (number = n())
# Funnel plot for all experiments
re_funnel = funnel(re,
back = "grey95", col = "steelblue2",
digits = c(1,2))
dev.copy(pdf,'figs/funnel_re_all.pdf')
dev.off()
# Funnel plot for field experiments
funnel(re_field,
back = "grey95", col = "steelblue2",
digits = c(1,2))
dev.copy(pdf,'figs/funnel_re_field.pdf')
dev.off()
# Funnel plot for survey experiments
funnel(fe_survey,
back = "grey95", col = "steelblue2",
digits = c(1,2))
funnel(re_survey,
back = "grey95", col = "steelblue2",
digits = c(1,2))
dev.copy(pdf,'figs/funnel_re_survey.pdf')
dev.off()
# Funnel plot with moderator for field experiments
funnel(me_mod,
back = "grey95", col = "steelblue2",
digits = c(1,2))
dev.copy(pdf,'figs/funnel_all_mod.pdf')
dev.off()
# Regression test for funnel plot asymmetry
regtest_re = regtest(re, model = "lm", predictor = "sei")
regtest_mod = regtest(me_mod, model = "lm", predictor = "sei")
regtest_re_survey = regtest(re_survey, model = "lm", predictor = "sei")
regtest_re_field = regtest(re_field, model = "lm", predictor = "sei")
stargazer(regtest_re)
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(metafor)
library(stargazer)
# Data import
load(file="data/meta_results.RData")
################################################################################
# Funnel Plot Analysis
################################################################################
# Examine number of published articles by field or survey
# with  group
sum = meta %>%
group_by(published, type) %>%
summarise (number = n())
# Funnel plot for all experiments
re_funnel = funnel(re,
back = "grey95", col = "steelblue2",
digits = c(1,2))
dev.copy(pdf,'figs/funnel_re_all.pdf')
dev.off()
# Funnel plot for field experiments
funnel(re_field,
back = "grey95", col = "steelblue2",
digits = c(1,2))
dev.copy(pdf,'figs/funnel_re_field.pdf')
dev.off()
# Funnel plot for survey experiments
funnel(fe_survey,
back = "grey95", col = "steelblue2",
digits = c(1,2))
funnel(re_survey,
back = "grey95", col = "steelblue2",
digits = c(1,2))
dev.copy(pdf,'figs/funnel_re_survey.pdf')
dev.off()
# Funnel plot with moderator for field experiments
funnel(me_mod,
back = "grey95", col = "steelblue2",
digits = c(1,2))
dev.copy(pdf,'figs/funnel_all_mod.pdf')
dev.off()
# Regression test for funnel plot asymmetry
regtest_re = regtest(re, model = "lm", predictor = "sei")
regtest_mod = regtest(me_mod, model = "lm", predictor = "sei")
regtest_re_survey = regtest(re_survey, model = "lm", predictor = "sei")
regtest_re_field = regtest(re_field, model = "lm", predictor = "sei")
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(metafor)
library(stargazer)
# Data import
load(file="data/meta_results.RData")
################################################################################
# Funnel Plot Analysis
################################################################################
# Examine number of published articles by field or survey
# with  group
sum = meta %>%
group_by(published, type) %>%
summarise (number = n())
# Funnel plot for all experiments
re_funnel = funnel(re,
back = "grey95", col = "steelblue2",
digits = c(1,2))
dev.copy(pdf,'figs/funnel_re_all.pdf')
dev.off()
# Funnel plot for field experiments
funnel(re_field,
back = "grey95", col = "steelblue2",
digits = c(1,2))
dev.copy(pdf,'figs/funnel_re_field.pdf')
dev.off()
# Funnel plot for survey experiments
funnel(fe_survey,
back = "grey95", col = "steelblue2",
digits = c(1,2))
funnel_re_survey = funnel(re_survey,
back = "grey95", col = "steelblue2",
digits = c(1,2))
dev.copy(pdf,'figs/funnel_re_survey.pdf')
dev.off()
# Funnel plot with moderator for field experiments
funnel_me_mod = funnel(me_mod,
back = "grey95", col = "steelblue2",
digits = c(1,2))
library(gridExtra)
library(ggplotify)
combine_funnels = grid.arrange(funnel_me_mod, funnel_re_survey,
ncol=2, nrow=1, widths= c(3.4,2))
combine_funnels
grid.arrange(funnel_me_mod, funnel_re_survey,
ncol=2, nrow=1, widths= c(3.4,2))
View(funnel_me_mod)
funnel(me_mod,
back = "grey95", col = "steelblue2",
digits = c(1,2))
View(survey)
View(survey)
survey = survey %>% filter(author_reduced != "Winters & Weitz-Shapiro 2015")
re_survey = rma.uni(yi = ate_vote, sei = se_vote, data = survey)
funnel(re_survey,
back = "grey95", col = "steelblue2",
digits = c(1,2))
fe_survey = rma.uni(yi = ate_vote, sei = se_vote, data = survey, method = "FE")
funnel(fe_survey,
back = "grey95", col = "steelblue2",
digits = c(1,2))
regtest_re
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(metafor)
library(stargazer)
library(gridExtra)
library(ggplotify)
# Data import
load(file="data/meta_results.RData")
################################################################################
# Funnel Plot Analysis
################################################################################
# Examine number of published articles by field or survey
# with  group
sum = meta %>%
group_by(published, type) %>%
summarise (number = n())
# Funnel plot for all experiments
re_funnel = funnel(re,
back = "grey95", col = "steelblue2",
digits = c(1,2))
dev.copy(pdf,'figs/funnel_re_all.pdf')
dev.off()
# Funnel plot for field experiments
funnel(re_field,
back = "grey95", col = "steelblue2",
digits = c(1,2))
dev.copy(pdf,'figs/funnel_re_field.pdf')
dev.off()
# Funnel plot for survey experiments
funnel(fe_survey,
back = "grey95", col = "steelblue2",
digits = c(1,2))
funnel(re_survey,
back = "grey95", col = "steelblue2",
digits = c(1,2))
dev.copy(pdf,'figs/funnel_re_survey.pdf')
dev.off()
# Funnel plot with moderator for field experiments
funnel(me_mod,
back = "grey95", col = "steelblue2",
digits = c(1,2))
dev.copy(pdf,'figs/funnel_all_mod.pdf')
dev.off()
# Save combined Japan and China chart
combine_funnels = grid.arrange(funnel_me_mod, funnel_re_survey,
ncol=2, nrow=1, widths= c(3.4,2))
# Regression test for funnel plot asymmetry
regtest_re = regtest(re, model = "lm", predictor = "sei")
regtest_mod = regtest(me_mod, model = "lm", predictor = "sei")
regtest_re_survey = regtest(re_survey, model = "lm", predictor = "sei")
regtest_re_field = regtest(re_field, model = "lm", predictor = "sei")
regtest_re
regtest_mod
regtest_re_survey
regtest_re_field
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(readxl)
library(metafor)
# Data import - Gallup
meta = read_excel("data/study_results.xlsx")
load(file="data/meta.RData")
################################################################################
# Calculate meta-analytic results
################################################################################
# Calculate confidence intervals for studies with SEs only
meta$ci_lower = with(meta, ifelse(is.na(ci_lower), ate_vote - 1.96*se_vote, ci_lower))
meta$ci_upper = with(meta, ifelse(is.na(ci_upper), ate_vote - 1.96*se_vote, ci_upper))
# Keep field experiments only
field = meta %>%
filter(type == "Field" | type == "Natural") %>%
arrange(ate_vote) %>%
mutate(author_reduced = reorder(author_reduced, -ate_vote))
# Remove Banarjee papers
#field = field %>% filter(author_reduced != "Banerjee et al. (2011)" &
#                         author_reduced != "Banerjee et al. (2010)")
# Keep survey experiments only
survey = meta %>%
filter(type == "Survey") %>%
arrange(ate_vote) %>%
mutate(author_reduced = reorder(author_reduced, -ate_vote))
# Random effects model
re_field = rma.uni(yi = ate_vote, sei = se_vote, data = field)
re_survey = rma.uni(yi = ate_vote, sei = se_vote, data = survey)
# Fixed effects model: unweighted
fe_field = rma.uni(yi = ate_vote, sei = se_vote, weighted = "FALSE",
method = "FE", data = field)
fe_survey = rma.uni(yi = ate_vote, sei = se_vote, weighted = "FALSE",
method = "FE", data = survey)
# Fixed effects model: weighted
fe_field = rma.uni(yi = ate_vote, sei = se_vote, weights = N,
method = "FE", data = field)
fe_survey = rma.uni(yi = ate_vote, sei = se_vote, weights = N,
method = "FE", data = survey)
# Normality test
shapiro.test(field$ate_vote)
mean(field$ate_vote)
################################################################################
# Conduct moderator analysis with type of study as moderator
################################################################################
meta$field = with(meta, ifelse(type == "Field" | type == "Natural", 1, 0))
# Remove lab experiments
meta = meta %>%
filter(type == "Field" | type == "Natural" | type == "Survey") %>%
arrange(ate_vote) %>%
mutate(author_reduced = reorder(author_reduced, -ate_vote))
# Fixed effects model without moderators
fe = rma.uni(yi = ate_vote, sei = se_vote, data = meta, method = "FE")
fe
re
fe
het_all_fe = fe$tau2
het_all_fe
fe$tau2
fe
re
re = rma(yi = ate_vote, sei = se_vote, data = meta)
re
fe
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(readxl)
library(metafor)
# Data import - Gallup
meta = read_excel("data/study_results.xlsx")
load(file="data/meta.RData")
################################################################################
# Calculate meta-analytic results
################################################################################
# Calculate confidence intervals for studies with SEs only
meta$ci_lower = with(meta, ifelse(is.na(ci_lower), ate_vote - 1.96*se_vote, ci_lower))
meta$ci_upper = with(meta, ifelse(is.na(ci_upper), ate_vote - 1.96*se_vote, ci_upper))
# Keep field experiments only
field = meta %>%
filter(type == "Field" | type == "Natural") %>%
arrange(ate_vote) %>%
mutate(author_reduced = reorder(author_reduced, -ate_vote))
# Remove Banarjee papers
#field = field %>% filter(author_reduced != "Banerjee et al. (2011)" &
#                         author_reduced != "Banerjee et al. (2010)")
# Keep survey experiments only
survey = meta %>%
filter(type == "Survey") %>%
arrange(ate_vote) %>%
mutate(author_reduced = reorder(author_reduced, -ate_vote))
# Random effects model
re_field = rma.uni(yi = ate_vote, sei = se_vote, data = field)
re_survey = rma.uni(yi = ate_vote, sei = se_vote, data = survey)
# Fixed effects model: unweighted
fe_field = rma.uni(yi = ate_vote, sei = se_vote, weighted = "FALSE",
method = "FE", data = field)
fe_survey = rma.uni(yi = ate_vote, sei = se_vote, weighted = "FALSE",
method = "FE", data = survey)
# Fixed effects model: weighted
fe_field = rma.uni(yi = ate_vote, sei = se_vote, weights = N,
method = "FE", data = field)
fe_survey = rma.uni(yi = ate_vote, sei = se_vote, weights = N,
method = "FE", data = survey)
# Normality test
shapiro.test(field$ate_vote)
mean(field$ate_vote)
################################################################################
# Conduct moderator analysis with type of study as moderator
################################################################################
meta$field = with(meta, ifelse(type == "Field" | type == "Natural", 1, 0))
# Remove lab experiments
meta = meta %>%
filter(type == "Field" | type == "Natural" | type == "Survey") %>%
arrange(ate_vote) %>%
mutate(author_reduced = reorder(author_reduced, -ate_vote))
# Fixed effects model without moderators
fe = rma.uni(yi = ate_vote, sei = se_vote, data = meta, method = "FE")
# Random effects model without moderators
re = rma(yi = ate_vote, sei = se_vote, data = meta)
het_all = re$tau2
# Mixed effects model with moderators
me_mod = rma(yi = ate_vote, sei = se_vote, mods = field, data = meta)
het_mod = me_mod$tau2
me_mod
