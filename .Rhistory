################################################################################
# Add to meta analysis dataframe
################################################################################
# Winters/Weitz-Shapiro 2017
wsw17 = data.frame(type="Survey", year=2016 , author = "Winters & Weitz-Shapiro",
author_reduced = "Winters & Weitz-Shapiro 2017", country = "Brazil",
ate_vote = ate.wsw17, se_vote = se.wsw17, ci_upper = NA,
ci_lower = NA, N = n.wsw17, published = 1, Notes = NA)
# Winters/Weitz-Shapiro 2013
wsw13 = data.frame(type="Survey", year=2013 , author = "Winters & Weitz-Shapiro",
author_reduced = "Winters & Weitz-Shapiro 2013", country = "Brazil",
ate_vote = ate.wsw13, se_vote = se.wsw13, ci_upper = NA,
ci_lower = NA,N = n.wsw13, published = 1, Notes = NA)
# Winters/Weitz-Shapiro 2015
wsw15 = data.frame(type="Survey", year=2015 , author = "Winters & Weitz-Shapiro",
author_reduced = "Winters & Weitz-Shapiro 2015", country = "Brazil",
ate_vote = ate.wsw15, se_vote = se.wsw15, ci_upper = NA,
ci_lower = NA,N = n.wsw15, published = 1, Notes = NA)
# Winters/Weitz-Shapiro 2018
wsw18 = data.frame(type="Survey", year=2018 , author = "Winters & Weitz-Shapiro",
author_reduced = "Winters & Weitz-Shapiro 2018", country = "Argentina",
ate_vote = ate.wsw18, se_vote = se.wsw18, ci_upper = NA,
ci_lower = NA,N = n.wsw18, published = 1, Notes = NA)
# Klasna and Tucker Sweden
kt_sweden = data.frame(type="Survey", year=2013 , author = "Klasna & Tucker",
author_reduced = "Klasna & Tucker (Sweden)", country = "Sweden",
ate_vote = ate.sweden, se_vote = se.wsw13, ci_upper = NA,
ci_lower = NA, N = n.sweden, published = 1, Notes = NA)
# Klasna and Tucker Moldova
kt_moldova = data.frame(type="Survey", year=2013 , author = "Klasna & Tucker",
author_reduced = "Klasna & Tucker (Moldova)", country = "Moldova",
ate_vote = ate.moldova, se_vote = se.moldova, ci_upper = NA,
ci_lower = NA, published = 1, N = n.moldova, Notes = NA)
# De Figuerido et al. Brazil 2011
# defig = data.frame(type="Survey", year=2011 , author = "De Figueiredo, Hidalgo, & Kasahara",
#                    author_reduced = "De Figueiredo et al.", country = "Brazil",
#                    ate_vote = ate.defig, se_vote = se.defig, ci_upper = NA,
#                    ci_lower = NA, published = 0, N = n.defig, Notes = NA)
# Mares and Visconti 2019
mv = data.frame(type="Survey", year=2019 , author = "Mares & Visconti",
author_reduced = "Mares & Visconti", country = "Romania",
ate_vote = ate.mv.avg, se_vote = se.mv.avg, ci_upper = NA,
ci_lower = NA, N = n.mv, published = 1, Notes = NA)
# Breitenstein 2019
b = data.frame(type="Survey", year=2019 , author = "Breitenstein",
author_reduced = "Breitenstein", country = "Spain",
ate_vote = ate.b.avg, se_vote = se.b.avg, ci_upper = NA,
ci_lower = NA, N = n.b, published = 1, Notes = NA)
# Franchino and Zucchini 2014
fz = data.frame(type="Survey", year=2014 , author = "Franchino and Zucchini",
author_reduced = "Franchino and Zucchini", country = "Italy",
ate_vote = ate.fz, se_vote = se.fz, ci_upper = NA,
ci_lower = NA, N = n.fz, published = 1, Notes = NA)
# Eggers, Vivyan, and Wagner 2017
evw = data.frame(type="Survey", year=2017 , author = "Eggers, Vivyan, and Wagner",
author_reduced = "Eggers et al.", country = "UK",
ate_vote = ate.evw, se_vote = se.evw, ci_upper = NA,
ci_lower = NA, N = n.evw, published = 1, Notes = NA)
# Azfar and Nelson 2007
an = data.frame(type="Lab", year=2007 , author = "Azfar and Nelson",
author_reduced = "Azfar and Nelson", country = "USA",
ate_vote = ate.an, se_vote = se.an, ci_upper = NA,
ci_lower = NA, N = n.an, published = 1, Notes = NA)
# Combine dataframes
meta = rbind(results, wsw17, wsw13, wsw15, wsw18, kt_sweden, kt_moldova,
mv, b, fz, evw, an)
#            defig, wsw13comp, wsw13nocomp, wsw13noinfo)
# Save combined dataframe
save(meta, file = "data/meta.RData")
View(meta)
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(metafor)
# Data import
load(file="data/meta_results.RData")
################################################################################
# Subset data to lab experiments
################################################################################
# Keep lab experiments only
lab = meta %>%
filter(type == "Lab") %>%
arrange(ate_vote) %>%
mutate(author_reduced = reorder(author_reduced, -ate_vote))
View(lab)
View(meta)
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(readxl)
library(metafor)
# Data import - Gallup
meta = read_excel("data/study_results.xlsx")
load(file="data/meta.RData")
################################################################################
# Calculate meta-analytic results
################################################################################
# Calculate confidence intervals for studies with SEs only
meta$ci_lower = with(meta, ifelse(is.na(ci_lower), ate_vote - 1.96*se_vote, ci_lower))
meta$ci_upper = with(meta, ifelse(is.na(ci_upper), ate_vote - 1.96*se_vote, ci_upper))
# Keep field experiments only
field = meta %>%
filter(type == "Field" | type == "Natural") %>%
arrange(ate_vote) %>%
mutate(author_reduced = reorder(author_reduced, -ate_vote))
# Remove Banarjee papers
#field = field %>% filter(author_reduced != "Banerjee et al. (2011)" &
#                         author_reduced != "Banerjee et al. (2010)")
# Keep survey experiments only
survey = meta %>%
filter(type == "Survey") %>%
arrange(ate_vote) %>%
mutate(author_reduced = reorder(author_reduced, -ate_vote))
# Random effects model
re_field = rma.uni(yi = ate_vote, sei = se_vote, data = field)
re_survey = rma.uni(yi = ate_vote, sei = se_vote, data = survey)
# Fixed effects model: unweighted
fe_field = rma.uni(yi = ate_vote, sei = se_vote, weighted = "FALSE",
method = "FE", data = field)
fe_survey = rma.uni(yi = ate_vote, sei = se_vote, weighted = "FALSE",
method = "FE", data = survey)
# Fixed effects model: weighted
fe_field = rma.uni(yi = ate_vote, sei = se_vote, weights = N,
method = "FE", data = field)
fe_survey = rma.uni(yi = ate_vote, sei = se_vote, weights = N,
method = "FE", data = survey)
# Normality test
shapiro.test(field$ate_vote)
mean(field$ate_vote)
################################################################################
# Conduct moderator analysis with type of study as moderator
################################################################################
meta$field = with(meta, ifelse(type == "Field" | type == "Natural", 1, 0))
# Save lab experiments
lab = meta %>%
filter(type == "Lab") %>%
arrange(ate_vote) %>%
mutate(author_reduced = reorder(author_reduced, -ate_vote))
View(lab)
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(readxl)
library(metafor)
# Data import - Gallup
meta = read_excel("data/study_results.xlsx")
load(file="data/meta.RData")
################################################################################
# Calculate meta-analytic results
################################################################################
# Calculate confidence intervals for studies with SEs only
meta$ci_lower = with(meta, ifelse(is.na(ci_lower), ate_vote - 1.96*se_vote, ci_lower))
meta$ci_upper = with(meta, ifelse(is.na(ci_upper), ate_vote - 1.96*se_vote, ci_upper))
# Keep field experiments only
field = meta %>%
filter(type == "Field" | type == "Natural") %>%
arrange(ate_vote) %>%
mutate(author_reduced = reorder(author_reduced, -ate_vote))
# Remove Banarjee papers
#field = field %>% filter(author_reduced != "Banerjee et al. (2011)" &
#                         author_reduced != "Banerjee et al. (2010)")
# Keep survey experiments only
survey = meta %>%
filter(type == "Survey") %>%
arrange(ate_vote) %>%
mutate(author_reduced = reorder(author_reduced, -ate_vote))
# Random effects model
re_field = rma.uni(yi = ate_vote, sei = se_vote, data = field)
re_survey = rma.uni(yi = ate_vote, sei = se_vote, data = survey)
# Fixed effects model: unweighted
fe_field = rma.uni(yi = ate_vote, sei = se_vote, weighted = "FALSE",
method = "FE", data = field)
fe_survey = rma.uni(yi = ate_vote, sei = se_vote, weighted = "FALSE",
method = "FE", data = survey)
# Fixed effects model: weighted
fe_field = rma.uni(yi = ate_vote, sei = se_vote, weights = N,
method = "FE", data = field)
fe_survey = rma.uni(yi = ate_vote, sei = se_vote, weights = N,
method = "FE", data = survey)
# Normality test
shapiro.test(field$ate_vote)
mean(field$ate_vote)
################################################################################
# Conduct moderator analysis with type of study as moderator
################################################################################
meta$field = with(meta, ifelse(type == "Field" | type == "Natural", 1, 0))
# Save lab experiments
lab = meta %>%
filter(type == "Lab") %>%
arrange(ate_vote) %>%
mutate(author_reduced = reorder(author_reduced, -ate_vote))
# Remove lab experiments
meta = meta %>%
filter(type == "Field" | type == "Natural" | type == "Survey") %>%
arrange(ate_vote) %>%
mutate(author_reduced = reorder(author_reduced, -ate_vote))
# Fixed effects model without moderators
fe = rma.uni(yi = ate_vote, sei = se_vote, data = meta, method = "FE")
# Random effects model without moderators
re = rma(yi = ate_vote, sei = se_vote, data = meta)
het_all = re$tau2
# Mixed effects model with moderators
me_mod = rma(yi = ate_vote, sei = se_vote, mods = field, data = meta)
het_mod = me_mod$tau2
# Calculate residual heterogeneity
res_het = (het_all - het_mod)/het_all
pred = predict(me_mod, newmods = cbind(seq(from = 0, to = 1, by = 1), 0), addx = TRUE)
################################################################################
# Save information for plotting
################################################################################
save(meta, field, survey, lab,
fe, re, me_mod, fe_field, fe_survey, re_field, re_survey,
file = "data/meta_results.RData")
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(metafor)
# Data import
load(file="data/meta_results.RData")
################################################################################
# Plot lab results
################################################################################
ggplot(lab, aes(ate_vote, author_reduced)) +
geom_point(color = "steelblue2", size = 1.5) +
geom_errorbarh(aes(y = author_reduced,
xmin = ate_vote - 1.96*se_vote,
xmax = ate_vote + 1.96*se_vote),
color="grey30", size=0.5, alpha = 0.5, height = 0.2) +
geom_vline(xintercept = 0, linetype = "dashed") +
geom_hline(yintercept = 2.5, linetype = "solid") +
geom_text(aes(label = country, x = 0.25, y = author_reduced), size = 3) +
xlab("Change in vote share (percentage points)") +
scale_x_continuous(limits = c(-.9, 0.3), breaks=seq(-.9,0.3, .1)) +
theme_classic() +
theme(axis.title.y=element_blank()) +
theme(plot.title = element_text(hjust = 0.5)) +
theme(axis.text=element_text(size = 8)) +
theme(axis.text.x = element_text(size = 8)) +
theme(legend.position = "none")
ggplot(lab, aes(ate_vote, author_reduced)) +
geom_point(color = "steelblue2", size = 1.5) +
geom_errorbarh(aes(y = author_reduced,
xmin = ate_vote - 1.96*se_vote,
xmax = ate_vote + 1.96*se_vote),
color="grey30", size=0.5, alpha = 0.5, height = 0.2) +
geom_vline(xintercept = 0, linetype = "dashed") +
geom_hline(yintercept = 2.5, linetype = "solid") +
geom_text(aes(label = country, x = 0.25, y = author_reduced), size = 3) +
xlab("Change in vote share (percentage points)") +
scale_x_continuous(limits = c(-.9, 0.3), breaks=seq(-.9,0.3, .1)) +
theme_classic() +
theme(axis.title.y=element_blank()) +
theme(plot.title = element_text(hjust = 0.5)) +
theme(axis.text=element_text(size = 8)) +
theme(axis.text.x = element_text(size = 8)) +
theme(legend.position = "none")
ggplot(lab, aes(ate_vote, author_reduced)) +
geom_point(color = "steelblue2", size = 1.5) +
geom_errorbarh(aes(y = author_reduced,
xmin = ate_vote - 1.96*se_vote,
xmax = ate_vote + 1.96*se_vote),
color="grey30", size=0.5, alpha = 0.5, height = 0.2) +
geom_vline(xintercept = 0, linetype = "dashed") +
geom_text(aes(label = country, x = 0.25, y = author_reduced), size = 3) +
xlab("Change in vote share (percentage points)") +
scale_x_continuous(limits = c(-.9, 0.3), breaks=seq(-.9,0.3, .1)) +
theme_classic() +
theme(axis.title.y=element_blank()) +
theme(plot.title = element_text(hjust = 0.5)) +
theme(axis.text=element_text(size = 8)) +
theme(axis.text.x = element_text(size = 8)) +
theme(legend.position = "none")
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(metafor)
# Data import
load(file="data/meta_results.RData")
################################################################################
# Plot lab results
################################################################################
ggplot(lab, aes(ate_vote, author_reduced)) +
geom_point(color = "steelblue2", size = 1.5) +
geom_errorbarh(aes(y = author_reduced,
xmin = ate_vote - 1.96*se_vote,
xmax = ate_vote + 1.96*se_vote),
color="grey30", size=0.5, alpha = 0.5, height = 0.2) +
geom_vline(xintercept = 0, linetype = "dashed") +
geom_text(aes(label = country, x = 0.25, y = author_reduced), size = 3) +
xlab("Change in vote share (percentage points)") +
scale_x_continuous(limits = c(-.9, 0.3), breaks=seq(-.9,0.3, .1)) +
theme_classic() +
theme(axis.title.y=element_blank()) +
theme(plot.title = element_text(hjust = 0.5)) +
theme(axis.text=element_text(size = 8)) +
theme(axis.text.x = element_text(size = 8)) +
theme(legend.position = "none")
ggsave("figs/lab", height = 4, width = 6)
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(metafor)
# Data import
load(file="data/meta_results.RData")
################################################################################
# Plot lab results
################################################################################
ggplot(lab, aes(ate_vote, author_reduced)) +
geom_point(color = "steelblue2", size = 1.5) +
geom_errorbarh(aes(y = author_reduced,
xmin = ate_vote - 1.96*se_vote,
xmax = ate_vote + 1.96*se_vote),
color="grey30", size=0.5, alpha = 0.5, height = 0.2) +
geom_vline(xintercept = 0, linetype = "dashed") +
geom_text(aes(label = country, x = 0.25, y = author_reduced), size = 3) +
xlab("Change in vote share (percentage points)") +
scale_x_continuous(limits = c(-.9, 0.3), breaks=seq(-.9,0.3, .1)) +
theme_classic() +
theme(axis.title.y=element_blank()) +
theme(plot.title = element_text(hjust = 0.5)) +
theme(axis.text=element_text(size = 8)) +
theme(axis.text.x = element_text(size = 8)) +
theme(legend.position = "none")
ggsave("figs/lab", height = 4, width = 6)
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(metafor)
# Data import
load(file="data/meta_results.RData")
################################################################################
# Plot lab results
################################################################################
ggplot(lab, aes(ate_vote, author_reduced)) +
geom_point(color = "steelblue2", size = 1.5) +
geom_errorbarh(aes(y = author_reduced,
xmin = ate_vote - 1.96*se_vote,
xmax = ate_vote + 1.96*se_vote),
color="grey30", size=0.5, alpha = 0.5, height = 0.2) +
geom_vline(xintercept = 0, linetype = "dashed") +
geom_text(aes(label = country, x = 0.25, y = author_reduced), size = 3) +
xlab("Change in vote share (percentage points)") +
scale_x_continuous(limits = c(-.9, 0.3), breaks=seq(-.9,0.3, .1)) +
theme_classic() +
theme(axis.title.y=element_blank()) +
theme(plot.title = element_text(hjust = 0.5)) +
theme(axis.text=element_text(size = 8)) +
theme(axis.text.x = element_text(size = 8)) +
theme(legend.position = "none")
ggsave("figs/lab.pdf", height = 4, width = 6)
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(metafor)
# Data import
load(file="data/meta_results.RData")
################################################################################
# Plot lab results
################################################################################
ggplot(lab, aes(ate_vote, author_reduced)) +
geom_point(color = "steelblue2", size = 1.5) +
geom_errorbarh(aes(y = author_reduced,
xmin = ate_vote - 1.96*se_vote,
xmax = ate_vote + 1.96*se_vote),
color="grey30", size=0.5, alpha = 0.5, height = 0.05) +
geom_vline(xintercept = 0, linetype = "dashed") +
geom_text(aes(label = country, x = 0.25, y = author_reduced), size = 3) +
xlab("Change in vote share (percentage points)") +
scale_x_continuous(limits = c(-.9, 0.3), breaks=seq(-.9,0.3, .1)) +
theme_classic() +
theme(axis.title.y=element_blank()) +
theme(plot.title = element_text(hjust = 0.5)) +
theme(axis.text=element_text(size = 8)) +
theme(axis.text.x = element_text(size = 8)) +
theme(legend.position = "none")
ggsave("figs/lab.pdf", height = 4, width = 6)
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(readxl)
library(metafor)
# Data import - Gallup
meta = read_excel("data/study_results.xlsx")
load(file="data/meta.RData")
################################################################################
# Calculate meta-analytic results
################################################################################
# Calculate confidence intervals for studies with SEs only
meta$ci_lower = with(meta, ifelse(is.na(ci_lower), ate_vote - 1.96*se_vote, ci_lower))
meta$ci_upper = with(meta, ifelse(is.na(ci_upper), ate_vote - 1.96*se_vote, ci_upper))
# Keep field experiments only
field = meta %>%
filter(type == "Field" | type == "Natural") %>%
arrange(ate_vote) %>%
mutate(author_reduced = reorder(author_reduced, -ate_vote))
# Remove Banarjee papers
#field = field %>% filter(author_reduced != "Banerjee et al. (2011)" &
#                         author_reduced != "Banerjee et al. (2010)")
# Keep survey experiments only
survey = meta %>%
filter(type == "Survey") %>%
arrange(ate_vote) %>%
mutate(author_reduced = reorder(author_reduced, -ate_vote))
# Random effects model
re_field = rma.uni(yi = ate_vote, sei = se_vote, data = field)
re_survey = rma.uni(yi = ate_vote, sei = se_vote, data = survey)
# Fixed effects model: unweighted
fe_field = rma.uni(yi = ate_vote, sei = se_vote, weighted = "FALSE",
method = "FE", data = field)
fe_survey = rma.uni(yi = ate_vote, sei = se_vote, weighted = "FALSE",
method = "FE", data = survey)
# Fixed effects model: weighted
fe_field = rma.uni(yi = ate_vote, sei = se_vote, weights = N,
method = "FE", data = field)
fe_survey = rma.uni(yi = ate_vote, sei = se_vote, weights = N,
method = "FE", data = survey)
# Normality test
shapiro.test(field$ate_vote)
mean(field$ate_vote)
################################################################################
# Conduct moderator analysis with type of study as moderator
################################################################################
meta$field = with(meta, ifelse(type == "Field" | type == "Natural", 1, 0))
# Save lab experiments
lab = meta %>%
filter(type == "Lab") %>%
arrange(ate_vote) %>%
mutate(author_reduced = reorder(author_reduced, -ate_vote))
# Remove lab experiments
meta = meta %>%
filter(type == "Field" | type == "Natural" | type == "Survey") %>%
arrange(ate_vote) %>%
mutate(author_reduced = reorder(author_reduced, -ate_vote))
# Fixed effects model without moderators
fe = rma.uni(yi = ate_vote, sei = se_vote, data = meta, method = "FE")
# Random effects model without moderators
re = rma(yi = ate_vote, sei = se_vote, data = meta)
het_all = re$tau2
# Mixed effects model with moderators
me_mod = rma(yi = ate_vote, sei = se_vote, mods = field, data = meta)
het_mod = me_mod$tau2
# Calculate residual heterogeneity
res_het = (het_all - het_mod)/het_all
pred = predict(me_mod, newmods = cbind(seq(from = 0, to = 1, by = 1), 0), addx = TRUE)
het_mod
me_mod
fe_survey
fe_field
fe_survey
fe_field
re_survey
re_field
################################################################################
# Libraries and Import
################################################################################
rm(list=ls())
# Libraries
library(tidyverse)
library(metafor)
library(stargazer)
library(gridExtra)
library(ggplotify)
# Data import
load(file="data/meta_results.RData")
################################################################################
# Funnel Plot Analysis
################################################################################
# Examine number of published articles by field or survey
# with  group
sum = meta %>%
group_by(published, type) %>%
summarise (number = n())
# Funnel plot for all experiments
re_funnel = funnel(re,
back = "grey95", col = "steelblue2",
digits = c(1,2))
funnel(re,
back = "grey95", col = "steelblue2",
digits = c(1,2))
funnel(re,
back = "grey95", col = "steelblue2",
digits = c(1,2), font = 2)
funnel(re,
back = "grey95", col = "steelblue2",
digits = c(1,2), font = 2)
